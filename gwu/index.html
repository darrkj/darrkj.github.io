<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Kenny Darrell">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>Proving Things Wrong</h2>
					<h2>(Over Right)</h2>
					<br>
					<h3>December 5, 2015</h3>
					<p>
						<small>Kenny Darrell</small><br>
						<small>Lead Data Scientist</small><br>
						<small>darrell@datamininglab.com</small>
					</p>
				</section>
				
        <section data-transition="linear" data-transition-speed="default">
          <h3>Data is Reshaping Everything</h3>
          <div class="mediaInline slideContent" >
            <p style="text-align:left" class="fragment">Data and Analytics can provide a great power</p>
            
          
					<blockquote class="fragment">
						&ldquo;With great power comes great responsibility&rdquo; Uncle Ben (Spider Man)
					</blockquote>

            
            
          <p style="text-align:left" class="fragment">AKA - It’s easier to shoot yourself in the foot</p>
          

          </div>
        </section>			
				


        <section data-transition="linear" data-transition-speed="default">
          <div class="mediaOnly slideContent noTitle" >
            <p><img src="img/elec.png" alt="alt text" height="80%" width="70%"/></p>
          </div>
        </section>
        
        
        
        <section data-transition="linear" data-transition-speed="default">
          <h3>Presidential Election</h3>
          <div class="slideContent" >
            <p style="text-align:left" class="fragment">Data has helped elect a president!</p>
            <p style="text-align:left" class="fragment">Can it inform us of who will be the next president?</p>
          </div>
        </section>

        <section data-transition="linear" data-transition-speed="default">
          <h3>Redskins Rule</h3>
          <div class="mediaInline slideContent" >
          
          <p class="fragment">If the Redskins win their final home game -&gt; incumbent wins</p>
          <p class="fragment"><img src="img/redskins.png" alt="alt text" height="80%" width="70%"/></p>
          <p class="fragment">Since 1936, but not 2004 and 2012 (18-2)</p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>LA Lakers Law</h3>
          <div class="mediaInline slideContent" >
            <p class="fragment">If LA reaches championship Republican wins</p>
            <p class="fragment"><img src="img/basket.png" alt="alt text" height="80%" width="70%"/></p>
            <p class="fragment">Since move to LA in 1960, but not 2008 and 2012 (12-2)</p>
          </div>
        </section>



        <section data-transition="linear" data-transition-speed="default">
          <h3>Tide vs Tigers</h3>
          <div class="slideContent" >
          <p class="fragment">Alabama (D) vs LSU (R)</p>
           <p class="fragment"><img src="img/foot.png" alt="alt text"/></p>
          <p class="fragment">Worked since 1984 (8-0)</p>

          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>Family Circle First Lady Cookie Contest</h3>
          <div class="slideContent" >
            <p class="fragment">Winning cookie recipe wins election</p>
            <p class="fragment"><img src="img/firstlady.png" alt="alt text" height="80%" width="70%"/></p>
            <p class="fragment">Worked since 1992, except 2008 (5-1)</p>
          </div>
        </section>

        <section data-transition="linear" data-transition-speed="default">
          <div class="slideContent" >
            <p>But these were jokes, right?</p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>Is this a joke?</h3>
          <div class="mediaOnly slideContent" >
            <p><img src="img/cof1.png" alt="alt text"/></p>
          </div>
        </section>

        <section data-transition="linear" data-transition-speed="default">
          <h3>Or this?</h3>
          <div class="mediaOnly slideContent" >
            <p><img src="img/cof2.png" alt="alt text"/></p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>Or this?</h3>
          <div class="mediaOnly slideContent" >
            <p><img src="img/cof3.png" alt="alt text"/></p>
          </div>
        </section>



        <section data-transition="linear" data-transition-speed="default">
          <h3>These were not jokes</h3>
          <div class="slideContent" >
            <p class="fragment">Real research occurred<p>
            <p class="fragment">Data was analyzed</p>
            <p class="fragment">Results were published</p>
          </div>
        </section>



        <section data-transition="linear" data-transition-speed="default">
            <p><img src="img/science.png" alt="alt text" height="80%" width="70%"></p>
        </section>
        
        
        <section data-transition="linear" data-transition-speed="default">
          <div class="mediaOnly slideContent" >
            <p>We work very hard to prove ourselves correct!</p>
          </div>
        </section>
        

        <section data-transition="linear" data-transition-speed="default">
          <div class="mediaOnly slideContent" >
            <p>EXAMPLE</p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>Say we are given some data</h3>
          <div class="slideContent" >
            
            <pre><code class="r">load(&quot;~/Desktop/car.RData&quot;)
head(train)</code></pre>

<pre><code>  Age    IsBadBuy    VehOdo  Color 
1   3         0       86788   BLUE     
2   5         0       80824 MAROON    
3   2         0       59269 SILVER    
4   9         0       78875 MAROON  
5   4         0       45341 ORANGE  
6   4         0       80785   BLUE  
</code></pre>

          </div>
        </section>





        <section data-transition="linear" data-transition-speed="default">
          <div class="mediaOnly slideContent" >
            <p>We need a goal by which to measure success</p>
            <p>ex: Buy good used cars that don't need repairs (kick cars)</p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>First we need to get a feel for the data</h3>
            <div class="slideContent" >
              <pre><code class="r">summary(train)</code></pre>

  <pre><code>      Age          VehOdo        IsBadBuy          Color      
 Min.   :0.000   Min.   :  4825   Min.   :0.0000   SILVER :10275  
 1st Qu.:3.000   1st Qu.: 61930   1st Qu.:0.0000   WHITE  : 8321  
 Median :4.000   Median : 73399   Median :0.0000   BLUE   : 7054  
 Mean   :4.171   Mean   : 71528   Mean   :0.1223   GREY   : 5391  
 3rd Qu.:5.000   3rd Qu.: 82392   3rd Qu.:0.0000   BLACK  : 5196  
 Max.   :9.000   Max.   :115026   Max.   :1.0000   RED    : 4247  
                                                    (Other): 9351 </code></pre>

        </div>
      </section>


      <section data-transition="linear" data-transition-speed="default">
        <div class="slideContent" >
          <p>We want to  indentify the lemons, then avoid them</p>
          <pre><code class="r">table(train$IsBadBuy)</code></pre>
<pre><code>
    0     1 
43739  6096 
          </code></pre>
          <p class="fragment">This is a rare event scenerio</p> 
          <p class="fragment">What traits can help us predict the lemon-ality?</p>
        </div>
      </section>





        <section data-transition="linear" data-transition-speed="default">
          <h3>Perhaps the odometer</h3>
          <div class="mediaOnly slideContent" >
            <p class="fragment">I don&#x27;t see a huge difference</p>
            <p><img src="img/odo.png" alt="alt text" height="80%" width="70%"/></p>
          </div>
        </section>


        <section data-transition="linear" data-transition-speed="default">
          <h3>What about color?</h3>
          <div class="mediaInline slideContent">
            <p class="fragment">More interesting!</p>
            <p><img src="img/color.png" alt="alt text" height="80%" width="70%"/></p>
          </div>
        </section>




    <section data-transition="linear" data-transition-speed="default">
      <h3>Is it statistically significant?</h3>
      <div class="slideContent" >
        <p>We have statistics for this purpose!</p>
        <p>How likely could this occur at random?</p>
        <pre><code class="r">pval(train, &#39;ORANGE&#39;)</code></pre>
        <pre><code>[1] 0.003342797</code></pre>
      </div>
    </section>
    
    
    <section data-transition="linear" data-transition-speed="default">
      <div class="mediaOnly slideContent" >
        <p class="fragment">Very significant</p>
        <p class="fragment">We can publish!</p>
      </div>
    </section>
    
    
  
    <section data-transition="linear" data-transition-speed="default">
      <h3>Orange Cars</h3>
      <div class="mediaOnly slideContent" >
        <p><img src="img/ora1.png" alt="alt text" height="80%" width="70%"/></p>
        </div>
    </section>



    <section data-transition="linear" data-transition-speed="default">
      <h3>Orange Cars</h3>
      <div class="mediaOnly slideContent" >
        <p><img src="img/ora2.png" alt="alt text" height="80%" width="70%"/></p>
      </div>
    </section>




    <section data-transition="linear" data-transition-speed="default">
      <h3>Orange Cars</h3>
      <div class="mediaOnly slideContent" >
        <p><img src="img/ora3.png" alt="alt text" height="70%" width="50%"/></p>
        </div>
    </section>
    
    
    
    <section data-transition="linear" data-transition-speed="default">
      <div class="mediaOnly slideContent" >
        <p class="fragment">Should we believe this result?</p>
        <p class="fragment">What happens when we use this info?</p>
      </div>
    </section>


    <section data-transition="linear" data-transition-speed="default">
      <h3>To use it we would build a model</h3>
      <div class="slideContent" >
        <pre><code class="r">mod1 &lt;- glm(IsBadBuy ~ Color, data = train, family = &quot;binomial&quot;)
summary(mod1)</code></pre>

            <pre><code>Call:
glm(formula = IsBadBuy ~ Color, family = &quot;binomial&quot;, data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-0.5961  -0.5109  -0.5103  -0.4922   2.2838  

Coefficients:
             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -1.899913   0.089660 -21.190  &lt; 2e-16 ***
ColorBLACK  -0.168533   0.099855  -1.688  0.09145 .  
ColorBLUE   -0.141035   0.097119  -1.452  0.14645  
ColorORANGE -0.631511   0.243607  -2.592  0.00953 ** 
ColorPURPLE  0.262304   0.190993   1.373  0.16964   
ColorBROWN   0.072222   0.190659   0.379  0.70484    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 37030  on 49834  degrees of freedom
Residual deviance: 36987  on 49821  degrees of freedom
AIC: 37015

Number of Fisher Scoring iterations: 4</code></pre>
      </div>
    </section>



    <section data-transition="linear" data-transition-speed="default">
      <div class="slideContent" >
        <p style="text-align:left" class="fragment">Currently 1000 cars for sale</p>
<pre style="text-align:left" class="fragment"><code class="r">buy &lt;- test[sample(nrow(test), 1000), ]
sum(buy$IsBadBuy)</code></pre>
<pre><code style="text-align:left" class="fragment">[1] 136</code></pre>



<p style="text-align:left" class="fragment">I run my model</p>


<pre style="text-align:left" class="fragment"><code class="r">res1 &lt;- predict(mod1, newdata = buy, type = &#39;response&#39;)
cutoff &lt;- .12   # My cutoff</code></pre>

<p style="text-align:left" class="fragment">I can only buy 80</p>

<pre style="text-align:left" class="fragment"><code class="r">res1 &lt;- data.frame(p = res1, act = buy$IsBadBuy)
res1 &lt;- res1[order(res1$p), ][1:80, ]</code></pre>


<p style="text-align:left" class="fragment">And I&#39;m stuck with</p>
<pre style="text-align:left" class="fragment"><code class="r">sum(res1$act)
[1] 10</code></pre>

</div>

</section>
<section data-transition="linear" data-transition-speed="default">
<p>Except it was very close to random!</p>
<div class="slideContent" >
<pre><code class="r">prop.test(c(sum(res1$act), nrow(res1)), 
          c(sum(buy$IsBadBuy), 1000), 
          alternative = 'less')$p.value</code></pre>

<pre><code>[1] 0.4629769
</code></pre>

</div>

</section>





<section data-transition="linear" data-transition-speed="default">
  <div class="slideContent" >
<p>Target shuffling to the rescue</p>
</div>
</section>


<section data-transition="linear" data-transition-speed="default">
  <div class="slideContent" >
<p>Wait, What?</p>
</div>
</section>


   


<section data-transition="linear" data-transition-speed="default">
<h3>Target Shuffling</h3>
<div class="slideContent" >
  <ol>
    <li><p style="text-align:left" class="fragment">Analyze data, note its strength 
    <br>
    (e.g., R-squared, lift, correlation, explanatory power)</p></li>
    
    <li><p style="text-align:left" class="fragment">Randomly shuffle the target to “break the relationship” between output and its inputs</p></li>
    
    <li><p style="text-align:left" class="fragment">Search for a new best model – or “most interesting result” - and save its strength</p></li>
    
    <li><p style="text-align:left" class="fragment">Repeat steps 2 and 3 and create a distribution of the strengths of the “Best Apparent Discoveries” (BADs)</p></li>
    
    <li><p style="text-align:left" class="fragment">Evaluate where your true results (from step 1) are on (or beyond) this BAD distribution.  This is its “significance”, or probability that a result as strong as it can occur by chance.</p></li>
  <ol>
</div>

</section>


<section data-transition="linear" data-transition-speed="default">
<h3>Not as significant as our initial result</h3>
<div class="slideContent" >
<pre><code class="r">m &lt;- c(pval(train, &#39;ORANGE&#39;))

copy_train &lt;- train
for (i in 1:1000) {
  copy_train$IsBadBuy &lt;- sample(copy_train$IsBadBuy)
  ps &lt;- sapply(levels(train$Color), function(x) pval(copy_train, x))
  m &lt;- c(m, min(ps))
}

min(which(sort(m) == m[1])) / length(m)
</code></pre>

<pre><code>[1] 0.05494505
</code></pre>

</div>

</section>




    <section data-transition="linear" data-transition-speed="default">
      <h3>So ...</h3>
      <div class="mediaOnly slideContent" >
        <p class="fragment">Target shuffling tells us our model is junk! When it does like a model it is a very good sign that we have something real!</p>
      </div>
    </section>






    <section data-transition="linear" data-transition-speed="default">
      <h3>Lets rewind a bit</h3>
      <div class="slideContent" >
        <pre><code class="r">t.test(train[train$IsBadBuy == 0, ]$VehOdo,
  train[train$IsBadBuy == 1, ]$VehOdo, 
  alternative = &#39;less&#39;)$p.value</code></pre>

        <pre><code>[1] 3.291555e-85</code></pre>

        <pre><code class="r">m &lt;- c(pvals(train))

copy_train &lt;- train
for (i in 1:1000) {
  copy_train$IsBadBuy &lt;- sample(copy_train$IsBadBuy)
  ps &lt;-  pvals(copy_train)
  m &lt;- c(m, min(ps))
}

min(which(sort(m) == m[1])) / length(m)</code></pre>

      <pre><code>[1] 0.000999001</code></pre>
    </div>
  </section>



    <section data-transition="linear" data-transition-speed="default">
      <div class="mediaOnly slideContent" >
        <p>This statistic also got worse, but it is still much better than random!</p>
      </div>
    </section>







  <section data-transition="linear" data-transition-speed="default">
    <h3>Model with confidence!</h3>
    <div class="slideContent" >
    <pre><code class="r">mod2 &lt;- glm(IsBadBuy ~ VehOdo, 
           data = train, family = &quot;binomial&quot;)

summary(mod2)</code></pre>

    <pre><code>
Call:
glm(formula = IsBadBuy ~ VehOdo, family = &quot;binomial&quot;, data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-0.7072  -0.5468  -0.4986  -0.4285   2.5753  

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -3.372e+00  7.592e-02  -44.41   &lt;2e-16 ***
VehOdo       1.919e-05  1.003e-06   19.13   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 37030  on 49834  degrees of freedom
Residual deviance: 36647  on 49833  degrees of freedom
AIC: 36651

Number of Fisher Scoring iterations: 5</code></pre>

    </div>
  </section>


  <section data-transition="linear" data-transition-speed="default">
    <div class="slideContent" >
        <p style="text-align:left" class="fragment">Currently 1000 cars for sale</p>
<pre style="text-align:left" class="fragment"><code class="r">sum(buy$IsBadBuy)</code></pre>
<pre><code style="text-align:left" class="fragment">[1] 136</code></pre>



<p style="text-align:left" class="fragment">I run my model</p>


<pre style="text-align:left" class="fragment"><code class="r">res2 &lt;- predict(mod2, newdata = buy, type = &#39;response&#39;)</code></pre>

<p style="text-align:left" class="fragment">I can only buy 80</p>

<pre style="text-align:left" class="fragment"><code class="r">res2 &lt;- data.frame(p = res2, act = buy$IsBadBuy)
res2 &lt;- res2[order(res2$p), ][1:80, ]</code></pre>


<p style="text-align:left" class="fragment">And I&#39;m stuck with</p>
<pre style="text-align:left" class="fragment"><code class="r">sum(res2$act)
[1] 4</code></pre>
    </div>

  </section>



    <section data-transition="linear" data-transition-speed="default">
      <h3>I probably won't guess that good!</h3>
      <div class="mediaOnly slideContent" >
        <pre><code class="r">prop.test(c(sum(res2$act), nrow(res2)), 
          c(sum(buy$IsBadBuy), 1000), 
          alternative = 'less')$p.value</code></pre>

<pre><code>[1] 0.02615255</code></pre>
      </div>
    </section>




<section data-transition="linear" data-transition-speed="default">
<h3>Lesson Learned</h3>
<div class="slideContent" >
<p>We need the mindset of proving something false, not true.</p>

<p>Nobody goes to work with the goal of breaking everything they have done, but the real world has no problem doing it for you.</p>

</div>

</section>
<section data-transition="linear" data-transition-speed="default">
<h3>Crisis of False Research Findings</h3>
<div class="slideContent" >
<p style="text-align:left" class="fragment">Amgen could only replicate 6/58 studies</p>
<p style="text-align:left" class="fragment">Bayer Heathcare replicated only 25% of 67 studies</p>
<p style="text-align:left" class="fragment">BMJ:  92% of 1,500 referees missed serious errors</p>
<p style="text-align:left" class="fragment">157/304 Journals accepted fake Bohannon paper</p>
<p style="text-align:left" class="fragment">Stan Young:  Examined controlled experiments trying to replicate 12 data “discoveries”:<br/>
    0 replicated; 7 neutral; 5 reversed</p>

</div>

</section>
<section data-transition="linear" data-transition-speed="default">
<div class="mediaOnly slideContent" >
<p><img src="img/jeallybean.png" alt="alt text"/></p>

</div>
</section>



  <section data-transition="linear" data-transition-speed="default">
    <div class="slideContent" >
      <iframe id="frame" width='2200' height='1700' src='TS_Animation/target_shuffle.html' frameborder='0'></iframe>
    </div>
  </section>




<section data-transition="linear" data-transition-speed="default">
<h3>Summary</h3>
<div class="slideContent" >
<p style="text-align:left" class="fragment">We can always find something interesting just by randomness</p>
<p style="text-align:left" class="fragment">We love stories and will believe anything, thus interpretability is no protection against error</p>
<p style="text-align:left" class="fragment">Science requires replication &amp; transparency
65-95% “health discovery” papers are false, due to vast search effect (multiple comparison)</p>

</div>

</section>








			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
