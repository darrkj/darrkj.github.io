<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Summer Movies</title>


<link rel="stylesheet" type="text/css" href="../../stylesheets/blog.css">

<!-- Styles for R syntax highlighter -->
<link rel="stylesheet" type="text/css" href="../../stylesheets/blog2.css">

    <link rel="stylesheet" type="text/css" href="../../stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../../stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../../stylesheets/print.css" media="print" />

<!-- R syntax highlighter -->
<script src="../../javascripts/r.js"></script>


</head>

<body>

<div class="container">


    <header>
      <div class="container">
        <h1>Analyzing Summer Movies</h1>
        <h2></h2>

<h4 class="author"><em>Kenny Darrell</em></h4>
<h4 class="date"><em>October 18, 2014</em></h4>
        </section>
      </div>
    </header>




<h2>Inspiration</h2>

<p>Creating the app in my last <a href="http://darrkj.github.io/blog/sep252014/">post</a> related to character networks got me thinking about some much older <a href="http://darrkj.github.io/blog/may262013/">work</a> I did related to movie data. This post focused on making things reproducible, but the underlying data was very interesting, the daily revenue of movies over time. There were interesting trends that could be seen in the temporal aspects of the data, it almost looked like a bouncing ball. There was a large revenue over the weekend followed by a slump throughout the week, only to repeat with lower amplitude in the coming week. I thought it would be interesting to look at this summer's movies. It is also a great place to use some of the visualization methods I have created recently as well as piecing them together to tell a story. 
</p>

<p>To start we should look at the date from a high level. We should expect to see hotspots over weekends when more people frequent theaters.</p>
<pre class="r"><code>devtools::source_url('https://raw.githubusercontent.com/darrkj/darrkj.github.io/master/rcode/calendarHeat.R')

load(&quot;movie.rda&quot;)

library(dplyr)

daily %&gt;% 
  group_by(date) %&gt;% 
  summarise(sum = sum(daily)) %&gt;%
  select(Date = date, value = sum) %&gt;%
  ts %&gt;%
  calheat</code></pre>
  
  
<p><a href="movie.rda">Movie Data</a></p>
  
<div class="separator" style="clear: both; text-align: center;"><img src="movie_heatmap.png" height="400" width="750"></a></div>

<p>This is pretty close to what I expected. The one thing of interest is that there seems to be a gradual increase in weekdays leading up to July and then it starts to fall of again. There also seems to be some weekends that draw a larger crowd than others. What could be causing this, perhaps more or better movies in the middle of the summer? Maybe just lots of opening weekends at the same time.</p>


  
<p>How would we determine which movies are better and compare when they come out? We can calculate the total revenue from each movie to get the top earners.</p>
<pre class="r"><code># What movies were good.

# Lets remove movies that we dont have there open


daily %&gt;%
  group_by(name) %&gt;%
  summarise(sum = sum(daily)) %&gt;%
  arrange(desc(sum)) %&gt;%
  slice(c(1:10)) -&gt;
  top_mv
  
top_mv</code></pre>
<pre><code>## Source: local data frame [10 x 2]
## 
##                                   name       sum
## 1              Guardians of the Galaxy 319169216
## 2      Transformers: Age of Extinction 245370666
## 3                           Maleficent 236412469
## 4           X-Men: Days of Future Past 233893992
## 5       Dawn of the Planet of the Apes 207604640
## 6             The Amazing Spider-Man 2 201911219
## 7                      Godzilla (2014) 200676069
## 8                       22 Jump Street 190849261
## 9  Teenage Mutant Ninja Turtles (2014) 187182309
## 10          How to Train Your Dragon 2 175859659</code></pre>
<pre class="r"><code>mv &lt;- top_mv$name</code></pre>



<pre class="r"><code>daily %&gt;% 
  filter(name %in% top_mv$name) %&gt;%
  group_by(date) %&gt;% 
  summarise(sum = sum(daily)) %&gt;%
  select(Date = date, value = sum) %&gt;%
  ts %&gt;%
  calheat</code></pre>
  
<p>It appears that the better movies come out earlier in the summer. By mid August they are all out.</p>  
  
<div class="separator" style="clear: both; text-align: center;"><img src="top_movies.png" height="400" width="750"></a></div>

<p>We compare movies we could create a calendar heatmap for each movie but that would difficult. How can we compare multiple revenue streams over time in plot. One method from d3 that could shine some light on this is the stream graph.</p>

<pre class="r"><code>daily %&gt;%
  filter(name %in% top_mv$name) %&gt;%
  select(key = name, value = daily, date) %&gt;%
  mutate(value = value / 1000000) %&gt;%
  arrange(key, date) %&gt;% 
  write.csv(file = 'daily.csv', row.names = FALSE)

stream_plot('daily.csv', 'daily.html')</code></pre>

<div style="text-align:center;"> <iframe src="http://darrkj.github.io/blog/oct182014/daily" width="850" height="450"></iframe></div>

<p>This is pretty cool. We can again see the bouncing ball type of phenomenon. We can also see how they come on strong and then fade out as other movies are coming. It appears that there is a staggered release. Almost like races where people start at normal time intervals to stop them from stampeding each other. There is a lot of noise here though. We could clean this up by aggregating away the daily fluctuations and get a weekly revenue.</p>

<pre class="r"><code># There is too much noise here
# New movies start on Friday so first day in dataset will be dropped, and last three becuase

weeks &lt;- data.frame(date = as.Date(&quot;2014-05-02&quot;) + 0:146, 
                    w = rep(1:21, each = 7))

daily %&gt;%
  filter(name %in% top_mv$name) %&gt;%
  inner_join(weeks, by = 'date') %&gt;%
  arrange(name, date) %&gt;%
  group_by(name, w) %&gt;%
  summarise(sum = sum(daily), date = min(date)) %&gt;%
  select(key = name, value = sum, date) %&gt;%
  write.csv(file = 'weekly.csv', row.names = FALSE)


stream_plot('weekly.csv', 'weekly.html')</code></pre>


<div style="text-align:center;"> <iframe src="http://darrkj.github.io/blog/oct182014/weekly" width="850" height="450"></iframe></div>

<p>That cleans it up a lot. We can now see the pattern but it does not offer much on the quantitative side though. I was recently introduced to bump charts. They allow us to see how rankings change over time. This is also a great place to try deploying something in <a href="http://www.tableausoftware.com/">Tableau</a>.</p>


<div id="now-try-a-bump-chart" class="section level1">
<h1>Now try a bump chart</h1>


</div>




<script type='text/javascript' src='https://public.tableausoftware.com/javascripts/api/viz_v1.js'></script><div class='tableauPlaceholder' style='width: 699px; height: 458px;'><noscript><a href='#'><img alt='Sheet 1 ' src='https:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;Bu&#47;Bump_0&#47;Sheet1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' width='699' height='458' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableausoftware.com%2F' /> <param name='site_root' value='' /><param name='name' value='Bump_0&#47;Sheet1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;Bu&#47;Bump_0&#47;Sheet1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div><div style='width:699px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;'><div style='float:right; padding-right:8px;'><a href='http://www.tableausoftware.com/public/about-tableau-products?ref=https://public.tableausoftware.com/views/Bump_0/Sheet1' target='_blank'></a></div></div>

<p>Here you can very clearly see how movies fade as newer releases come to theaters. There is very little trading places. For the most part a movie comes out and jumps to the top, as others come out they push older movies to lower and lower ranks until they eventually leave the theaters.</p>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with --self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>






